{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HongBo with NolBo</title>
<link
	href="https://fonts.googleapis.com/css2?family=Libre+Bodoni:ital@0;1&display=swap"
	rel="stylesheet">
<link href="{%static 'css/styles.css' %}" rel="stylesheet" />

</head>
<body>
	
	<div class="header" id="link_header">  
            <nav class="navbar">             
                <ul class="navbar_menu">
                    <li><a href="#link_header">HOME</a></li>
                    <li><a href="/hmap">H_MAP</a></li>
                    <li><a href="/statistics">통계서비스</a></li>
                    <li><a href="/board">홍보게시판</a></li>
                    <li><a href="#intro">이용방법</a></li>
                </ul>
            </nav>
     </div>
	<div class="intro_text">
		<!-- <h1>홍보와 놀보</h1> -->
		<form action="hmap" method="post">{%csrf_token%}
			<select name="age">
				<option value="0~9">0세에서 9세</option>
				<option value="10~19">10세에서 19세</option>
				<option value="20~29">20세에서 29세</option>
				<option value="30~39">30세에서 39세</option>
				<option value="40~49">40세에서 49세</option>
				<option value="50~59">50세에서 59세</option>
				<option value="60~69">60세에서 69세</option>
				<option value="70~">70세이상</option>
			</select>
			<select name="gender">
				<option value="남">남자</option>
				<option value="여">여자</option>
			</select>
			<select name="time">
				<option value="0">0시</option>
				<option value="1">1시</option>
				<option value="1">2시</option>
				<option value="1">3시</option>
				<option value="1">4시</option>
				<option value="1">5시</option>
				<option value="1">6시</option>
				<option value="1">7시</option>
				<option value="1">8시</option>
				<option value="1">9시</option>
				<option value="1">10시</option>
				<option value="1">11시</option>
				<option value="1">12시</option>
				<option value="1">13시</option>
				<option value="1">14시</option>
				<option value="1">15시</option>
				<option value="1">16시</option>
				<option value="1">17시</option>
				<option value="1">18시</option>
				<option value="1">19시</option>
				<option value="1">20시</option>
				<option value="1">21시</option>
				<option value="1">22시</option>
				<option value="1">23시</option>
				<option value="1">24시</option>
			</select>
			<input type="submit" value="선택"/>
		</form>

		<br> <br>
		<!-- <h4 class="contents">CREATE BY 3조</h4> -->
	</div>
	<div id="map" style="width: 100%; height: 350px;"></div>

	<script type="text/javascript"
		src="//dapi.kakao.com/v2/maps/sdk.js?appkey=0139f5db8dfcd42cb03cf87d79b23302&libraries=clusterer"></script>
	<script>
		var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
		mapOption = {
			center : new kakao.maps.LatLng(37.49879519999992, 127.02753629999934), // 지도의 중심좌표
			level : 3,
		// 지도의 확대 레벨
			mapTypeId: kakao.maps.MapTypeId.ROADMAP
		};

		var map = new kakao.maps.Map(mapContainer, mapOption);
		// 마커 클러스터러를 생성합니다 
	    var clusterer = new kakao.maps.MarkerClusterer({
	        map: map, // 마커들을 클러스터로 관리하고 표시할 지도 객체 
	        averageCenter: true, // 클러스터에 포함된 마커들의 평균 위치를 클러스터 마커 위치로 설정 
	        minLevel: 10 // 클러스터 할 최소 지도 레벨 
	    });
		
		var x1 = parseFloat("{{x1}}")
		var x2 = parseFloat("{{x2}}")
		var x3 = parseFloat("{{x3}}")
		var y1 = parseFloat("{{y1}}")
		var y2 = parseFloat("{{y2}}")
		var y3 = parseFloat("{{y3}}")
		
		var 데이터 = [
			[x1, y1, '<div style="padding: 5px">에이콘</div>'],
			[x2, y2, '<div style="padding: 5px">역삼역</div>'],
			[x3, y3, '<div style="padding: 5px">강남역</div>']
		];
		
		var markers = [];
		for (var i = 0; i < 데이터.length; i++) {
			// 마커가 표시될 위치입니다 
			var marker = new kakao.maps.Marker({
				position : new kakao.maps.LatLng(데이터[i][0], 데이터[i][1]),
				map: map
			});
			// 인포윈도우를 생성합니다
			var infowindow = new kakao.maps.InfoWindow({
				content : 데이터[i][2]
			});
			
			// 마커 위에 인포윈도우를 표시합니다. 두번째 파라미터인 marker를 넣어주지 않으면 지도 위에 표시됩니다
			// infowindow.open(map, marker);
			markers.push(marker);
			kakao.maps.event.addListener(marker, 'mouseover', makeOverListener(map, marker, infowindow));
		    kakao.maps.event.addListener(marker, 'mouseout', makeOutListener(infowindow));
		}
		// 클러스터러에 마커들을 추가합니다
        clusterer.addMarkers(markers);
		
     	// 인포윈도우를 표시하는 클로저를 만드는 함수입니다 
        function makeOverListener(map, marker, infowindow) {
            return function() {
                infowindow.open(map, marker);
            };
        }
		
     	// 인포윈도우를 닫는 클로저를 만드는 함수입니다 
        function makeOutListener(infowindow) {
            return function() {
                infowindow.close();
            };
        }

	</script>
</body>
</html>
