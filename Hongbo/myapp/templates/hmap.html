{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HongBo with NolBo</title>
<link
   href="https://fonts.googleapis.com/css2?family=Libre+Bodoni:ital@0;1&display=swap"
   rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Shadows+Into+Light&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Stylish&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Brush+Script&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo&display=swap" rel="stylesheet">
<link href="{%static 'css/styles.css' %}" rel="stylesheet" />
<link
   href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
   rel="stylesheet">
   
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>
</head>
<style>
select {
   text-align-last: center;   
}

.highcharts-figure, .highcharts-data-table table {
   min-width: 1300px;
   max-width: 1000px;
   margin: 2em auto;
}

.highcharts-data-table table {
   font-family: Verdana, sans-serif;
   border-collapse: collapse;
   border: 1px solid #ebebeb;
   margin: 10px auto;
   text-align: center;
   width: 100%;
   max-width: 500px;
}

.highcharts-data-table caption {
   padding: 1em 0;
   font-size: 1.2em;
   color: #555;
}

.highcharts-data-table th {
   font-weight: 600;
   padding: 0.5em;
}

.highcharts-data-table td, .highcharts-data-table th,
   .highcharts-data-table caption {
   padding: 0.5em;
}

.highcharts-data-table thead tr, .highcharts-data-table tr:nth-child(even)
   {
   background: #f8f8f8;
}

.highcharts-data-table tr:hover {
   background: #f1f7ff;
}

.row{
   margin-right : 100px; 
   justify-content: center;
}


</style>
<body>
<div class="wrap">
   <div class="intro_bg">
   <div class="header" id="link_header">  
            <nav class="navbar">             
                <ul class="navbar_menu">
                    <li><a href="/main">HOME</a></li>
                    <li><a href="/hmap">H_MAP</a></li>
                    <li><a href="/statistics">통계서비스</a></li>
                    <li><a href="/board">홍보게시판</a></li>
                    <li><a href="#intro">이용방법</a></li>
                </ul>
            </nav>
     </div>

      <div class="text-center">
     <br>
            <p>H MAP은 무분별한 홍보로 인해 <br> 고통을 받는 모든 스타트업 또는 자영업자 들에게 제공하기 위해서 만들어 졌습니다<br>(홍보가 필요한 모든이에게 H_MAP의 서비스를 이용할 수 있습니다 :)<br>*아래 나이대와 성별, 궁굼한 시간대를 설정 후 검색 해주세요!*</p>
     <br>
     </div>
   <div class="intro_text" style="margin: 50px">
      <!-- <h1>홍보와 놀보</h1> -->
      <form action="hmap" name="select" method="post">{%csrf_token%}
         <div class="container">
            <div class="row">
               <div class="col-2">
                  <select name="age" class="form-select">
                     <option value="0~9">0세에서 9세</option>
                     <option value="10~19">10세에서 19세</option>
                     <option value="20~29">20세에서 29세</option>
                     <option value="30~39">30세에서 39세</option>
                     <option value="40~49">40세에서 49세</option>
                     <option value="50~59">50세에서 59세</option>
                     <option value="60~69">60세에서 69세</option>
                     <option value="70~">70세이상</option>
                  </select>
               </div>
               <div class="col-2">
                  <select name="gender" class="form-select">
                     <option value="남">남자</option>
                     <option value="여">여자</option>
                  </select>
               </div>
               <div class="col-2">
                  <select name="time" class="form-select" >
                     <option value="0">0시</option>
                     <option value="1">1시</option>
                     <option value="1">2시</option>
                     <option value="1">3시</option>
                     <option value="1">4시</option>
                     <option value="1">5시</option>
                     <option value="1">6시</option>
                     <option value="1">7시</option>
                     <option value="1">8시</option>
                     <option value="1">9시</option>
                     <option value="1">10시</option>
                     <option value="1">11시</option>
                     <option value="1">12시</option>
                     <option value="1">13시</option>
                     <option value="1">14시</option>
                     <option value="1">15시</option>
                     <option value="1">16시</option>
                     <option value="1">17시</option>
                     <option value="1">18시</option>
                     <option value="1">19시</option>
                     <option value="1">20시</option>
                     <option value="1">21시</option>
                     <option value="1">22시</option>
                     <option value="1">23시</option>
                     <option value="1">24시</option>
                  </select>
               </div>
               <div class="col-1">
                  <button type="submit" class="btn btn-light">검색</button>
               </div>
            </div>
         </div>
      </form>
      <br> <br>
      <!-- <h4 class="contents">CREATE BY 3조</h4> -->
   </div>
   <div id="map" style="width: 1500px; height: 700px; margin: 0 auto"></div>
      
   </div>
   <div class="moveTopBtn">
    up
    </div>         
        <!-- footer --> 
       <footer>
            <div>
                AcornAcademy <br>
                COPYRIGHT 2022. ALL RIGHT RESERVED.
            </div>
       </footer>
</div>           
    

   <script type="text/javascript"
      src="//dapi.kakao.com/v2/maps/sdk.js?appkey=0139f5db8dfcd42cb03cf87d79b23302&libraries=clusterer"></script>
   <script>
      var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
      mapOption = {
         center : new kakao.maps.LatLng(37.49879519999992, 127.02753629999934), // 지도의 중심좌표
         level : 8,
      // 지도의 확대 레벨
         mapTypeId: kakao.maps.MapTypeId.ROADMAP
      };
      
      var map = new kakao.maps.Map(mapContainer, mapOption);
      // 마커 클러스터러를 생성합니다 
       var clusterer = new kakao.maps.MarkerClusterer({
           map: map, // 마커들을 클러스터로 관리하고 표시할 지도 객체 
           averageCenter: true, // 클러스터에 포함된 마커들의 평균 위치를 클러스터 마커 위치로 설정 
           minLevel: 8 // 클러스터 할 최소 지도 레벨 
       });
      
      var x1 = parseFloat("{{x1}}")
      var x2 = parseFloat("{{x2}}")
      var x3 = parseFloat("{{x3}}")
      var y1 = parseFloat("{{y1}}")
      var y2 = parseFloat("{{y2}}")
      var y3 = parseFloat("{{y3}}")
      
      var 데이터 = [
         [x1, y1, '<div style="font-size: 2em;">{{읍면동1}}</div>'],
         [x2, y2, '<div style="font-size: 2em;">{{읍면동2}}</div>'],
         [x3, y3, '<div style="font-size: 2em;">{{읍면동3}}</div>']
      ];
      
      var markers = [];
      for (var i = 0; i < 데이터.length; i++) {
         // 마커가 표시될 위치입니다 
         var marker = new kakao.maps.Marker({
            position : new kakao.maps.LatLng(데이터[i][0], 데이터[i][1]),
            map: map
         });
         // 인포윈도우를 생성합니다
         var infowindow = new kakao.maps.InfoWindow({
            content : 데이터[i][2]
         });
         
         // 마커 위에 인포윈도우를 표시합니다. 두번째 파라미터인 marker를 넣어주지 않으면 지도 위에 표시됩니다
         // infowindow.open(map, marker);
         markers.push(marker);
         kakao.maps.event.addListener(marker, 'mouseover', makeOverListener(map, marker, infowindow));
          kakao.maps.event.addListener(marker, 'mouseout', makeOutListener(infowindow));
      }
      // 클러스터러에 마커들을 추가합니다
        clusterer.addMarkers(markers);
      
        // 인포윈도우를 표시하는 클로저를 만드는 함수입니다 
        function makeOverListener(map, marker, infowindow) {
            return function() {
                infowindow.open(map, marker);
            };
        }
      
        // 인포윈도우를 닫는 클로저를 만드는 함수입니다 
        function makeOutListener(infowindow) {
            return function() {
                infowindow.close();
            };
        }

   </script>
</body>
</html>